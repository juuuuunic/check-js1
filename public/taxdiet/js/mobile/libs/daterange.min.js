/*!
 * jQuery UI date range picker widget
 * Copyright (c) 2014 Tamble, Inc.
 * Licensed under MIT (https://github.com/tamble/jquery-ui-daterangepicker/raw/master/LICENSE.txt)
 *
 * Depends:
 *   - jQuery 1.8.3+
 *   - jQuery UI 1.9.0+ (widget factory, position utility, button, menu, datepicker)
 *   - moment.js 2.3.0+
 */

(function(d,D,M){function I(b,c,e){function f(c){l.button("option","label",c)}var a="drp_autogen"+v++;d('label[for="'+b.attr("id")+'"]').attr("for",a);var l=d('<button type="button"></button>').addClass(c+"-triggerbutton").attr({title:b.attr("title"),tabindex:b.attr("tabindex"),id:a}).button({icons:{secondary:e.icon},label:e.initialText});return{getElement:function(){return l},getLabel:function(){return l.button("option","label")},setLabel:f,reset:function(){b.val("").change();f(e.initialText)}}}
function J(b,c,e){var f,a;(function(){f=d("<div></div>").addClass(b+"-presets");a=d("<ul></ul>");d.each(c.presetRanges,function(){d('<li><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).click(e).appendTo(a)});f.append(a);a.menu().data("ui-menu").delay=0})();return{getElement:function(){return f}}}function K(b,c){function e(){setTimeout(function(){f();e()},moment().endOf("day")-moment())}function f(){l.datepicker("refresh");l.datepicker("setDate",null)}
var a={start:null,end:null};var l=d("<div></div>",{"class":b+"-calendar ui-widget-content"});l.datepicker(d.extend({},c.datepickerOptions,{beforeShowDay:function(d){var e=[!0,a.start&&(+d===+a.start||a.end&&a.start<=d&&d<=a.end)?"ui-state-highlight":""],b=[!0,""];c.datepickerOptions.hasOwnProperty("beforeShowDay")&&(b=c.datepickerOptions.beforeShowDay(d));return[e[0]&&b[0],e[1]+b[1]]},onSelect:function(e,b){var f=d.datepicker.parseDate(c.datepickerOptions.dateFormat||d.datepicker._defaults.dateFormat,
e);!a.start||a.end?(a.start=f,a.end=null):f<a.start?(a.end=a.start,a.start=f):a.end=f;if(c.datepickerOptions.hasOwnProperty("onSelectDay"))c.datepickerOptions.onSelectDay(e,b)}}));e();return{getElement:function(){return l},scrollToRangeStart:function(){a.start&&l.datepicker("setDate",a.start)},getRange:function(){return a},setRange:function(c){a=c;f()},refresh:f,reset:function(){a={start:null,end:null};f()}}}function L(b,c,e){var f=d('<button type="button" class="ui-priority-primary"></button>').text(c.applyButtonText).button();
c=d('<button type="button" class="ui-priority-secondary"></button>').text(c.cancelButtonText).button();var a=d("<div></div>").addClass(b+"-buttonpanel").append(f).append(c);e&&(f.click(e.onApply),c.click(e.onCancel));return{getElement:function(){return a}}}function y(b,c){function e(){if(c.autoFitCalendars){var z=d(D).width(),g=h.outerWidth(!0),a=m.getElement(),b=a.datepicker("option","numberOfMonths"),f=b;if(g>z){for(;1<b&&h.outerWidth(!0)>z;)a.datepicker("option","numberOfMonths",--b);b!==f&&(e.monthWidth=
(g-h.outerWidth(!0))/(f-b))}else for(;b<e.numberOfMonths&&z-h.outerWidth(!0)>=e.monthWidth;)a.datepicker("option","numberOfMonths",++b);F();A=!1}}function f(){k.getElement().click(G);k.getElement().keydown(y);t.click(n);d(D).resize(function(){p?e():A=!0})}function a(a){var g=c.dateFormat;return d.datepicker.formatDate(g,a.start)+(+a.end!==+a.start?c.rangeSplitter+d.datepicker.formatDate(g,a.end):"")}function l(a){var g=c.altFormat,b={};b.start=d.datepicker.formatDate(g,a.start);b.end=d.datepicker.formatDate(g,
a.end);return JSON.stringify(b)}function E(a){var b=c.altFormat,e=null;if(a)try{e=JSON.parse(a,function(a,c){return a?d.datepicker.parseDate(b,c):c})}catch(N){}return e}function w(){var c=E(b.val());c?(k.setLabel(a(c)),m.setRange(c)):m.reset()}function x(d){var g=d||m.getRange();if(g.start&&(g.end||(g.end=g.start),d&&m.setRange(g),k.setLabel(a(g)),b.val(l(g)).change(),c.onChange))c.onChange()}function v(){var a=d(this),b=a.data("dateStart")().startOf("day").toDate(),a=a.data("dateEnd")().startOf("day").toDate();
m.setRange({start:b,end:a});c.applyOnMenuSelect&&(n(),x());return!1}function F(){h.position({my:"left top",at:"left bottom"+(0>c.verticalOffset?c.verticalOffset:"+"+c.verticalOffset),of:k.getElement(),collision:"flipfit flipfit",using:function(a,b){var d=q,e=b.element.top+b.element.height/2,f=b.target.top+b.target.height/2,g=r;q=b.element.left+b.element.width/2>b.target.left+b.target.width/2?1:0;if(q!==d){if(c.mirrorOnCollision){var l=0===q?B:m;h.children().first().append(l.getElement())}h.removeClass("comiseo-daterangepicker-"+
u[d]);h.addClass("comiseo-daterangepicker-"+u[q])}h.css({left:a.left,top:a.top});r=e>f?3:2;r!==g&&(null!==g&&k.getElement().removeClass("comiseo-daterangepicker-"+u[g]),k.getElement().addClass("comiseo-daterangepicker-"+u[r]));d=3===r&&b.element.top-b.target.top!==b.target.height+c.verticalOffset||2===r&&b.target.top-b.element.top!==b.element.height+c.verticalOffset;k.getElement().toggleClass("comiseo-daterangepicker-vfit",d)}})}function y(a){switch(a.which){case d.ui.keyCode.UP:case d.ui.keyCode.DOWN:a.preventDefault();
a.stopPropagation();C();break;case d.ui.keyCode.ESCAPE:a.preventDefault();a.stopPropagation();n();break;case d.ui.keyCode.TAB:n()}}function C(){p||(k.getElement().addClass("comiseo-daterangepicker-active"),t.show(),p=!0,A&&e(),m.scrollToRangeStart(),h.show(),F());if(c.onOpen)c.onOpen()}function n(){p&&(h.hide(),t.hide(),k.getElement().removeClass("comiseo-daterangepicker-active"),p=!1);if(c.onClose)c.onClose()}function G(){p?n():C()}var h,t,k,B,m,H,p=!1,A=!1,u=["left","right","top","bottom"],q=1,
r=null;(function(){k=I(b,"comiseo-daterangepicker",c);B=J("comiseo-daterangepicker",c,v);m=K("comiseo-daterangepicker",c);e.numberOfMonths=c.datepickerOptions.numberOfMonths;e.numberOfMonths instanceof Array&&(c.autoFitCalendars=!1);H=L("comiseo-daterangepicker",c,{onApply:function(){n();x()},onCancel:function(){n();w()}});h=d("<div></div>",{"class":"comiseo-daterangepicker comiseo-daterangepicker-"+u[q]+" ui-widget ui-widget-content ui-corner-all ui-front"}).append(d("<div></div>",{"class":"comiseo-daterangepicker-main ui-widget-content"}).append(B.getElement()).append(m.getElement())).append(d('<div class="ui-helper-clearfix"></div>').append(H.getElement())).hide();
b.hide().after(k.getElement());t=d("<div></div>",{"class":"ui-front comiseo-daterangepicker-mask"}).hide();d("body").append(t).append(h);e();w();f()})();return{toggle:G,destroy:function(){h.remove();k.getElement().remove();b.show()},open:C,close:n,setRange:x,getRange:function(){return E(b.val())},clearRange:function(){k.reset();m.reset()},reset:w,getContainer:function(){return h}}}var v=0;d.widget("comiseo.daterangepicker",{version:"0.3.3",options:{presetRanges:[],verticalOffset:0,initialText:"\uae30\uac04\uc120\ud0dd",
icon:"ui-icon-triangle-1-s",applyButtonText:"\uc801\uc6a9",cancelButtonText:"\ucde8\uc18c",rangeSplitter:"|",dateFormat:"yy-mm-dd",altFormat:"yy-mm-dd",mirrorOnCollision:!0,applyOnMenuSelect:!0,autoFitCalendars:!0,onOpen:null,onClose:null,onChange:null,datepickerOptions:{numberOfMonths:2,maxDate:1E3}},_create:function(){this._dateRangePicker=y(this.element,this.options)},_destroy:function(){this._dateRangePicker.destroy()},open:function(){this._dateRangePicker.open()},close:function(){this._dateRangePicker.close()},
setRange:function(b){this._dateRangePicker.setRange(b)},getRange:function(){return this._dateRangePicker.getRange()},clearRange:function(){this._dateRangePicker.clearRange()},widget:function(){return this._dateRangePicker.getContainer()}})})(jQuery,window);