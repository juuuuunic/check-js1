<!DOCTYPE html>
<html class="desktop">
<head>
<meta charset="utf-8">
<title>약관동의</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="description" content="우아한청년들 라이더지원시스템">
<meta property="og:title" content="우아한청년들 라이더지원시스템">

<!--style -->
<link href="/css/normalize.css" rel="stylesheet">
<link href="/css/layout.css" rel="stylesheet">

<!--js -->
<script src="/js/jquery-1.11.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/common.js"></script>

<!--lib /  fancybox-->
<!-- <link rel="stylesheet" type="text/css" href="/lib/slick/slick.css" />
<script src="/lib/slick/slick.min.js"></script> -->

<script>
$(function(){

    $(document).on('click', '.btn-delivery', function() {
        //$(this).attr('data-info',1).siblings('li').attr('data-info',0);
        var element = event.target.value;
        var fnName = $(this).find('input').attr('name');
        console.log(element)
        if(fnName == 'btn-delivery1') {
            fnChange(fnName,element);
            return;
            // $(document).on('click', '#pop-next', function() {
            //     // if(delivery == '자동차'||delivery == '오토바이') $('.btn-delivery2').css({"display":"block"});
            //     // else $('.btn-delivery2').css({"display":"none"}); 
            // });
        } else if(fnName == 'btn-delivery2')  {
            return;
        }

        
    });


    // 배달 활동지역 선택
    $('.btn-area').on('click', function() {
        //선택되어있는 활동지역 배열로 저장    
        var arr = new Array(); 
        $(".conn_area-list > li:not(.list-non)").each(function() {   
            arr.push($(this).text()); 
        });
       
        //선택되어있는 활동지역 체크 유지
        $.each(arr, function(element) { 
            $('input[name=delivery-area_list]').each(function() { 
                var area =  $(this).next('label').text();
                if(area == arr[element]) $(this).prop('checked', true);                
            });
        });

        
        //선택한 지역 체크 유지
        // $(".conn_area-list > li:not(.list-non)").each(function() {
        //     var listArea = $(this).text();
        //     $('input[name=delivery-area_list]').each(function() { 
        //         var arrArea = $(this).next('label').text();
        //         if(listArea == arrArea) $(this).prop('checked', true);
        //     });
        // });

        //선택한 지역 리스트 추가
        $(document).on('change', 'input[name=delivery-area_list]', function() {
            var chk = $(".delivery-area input");
            var chked = $(".delivery-area input:checked");
            var cnt = chked.length;
            //var area = $(this).prop('checked',true).next('label').text();
            
            //선택 개수 제한
            if(cnt > 3){
                $(this).prop('checked', false);
            }
            $("#pop-next").off("click").on('click', function() {
                
                  
                $('input[name=delivery-area_list]:checked').each(function() {
                    //array.push($(this).next('label').text());
                    var label = $(this).next('label').text();
                    if(!arr.includes(label)) { //활동지역이 배열에 없을 때                    
                        $(".conn_area-list").append('<li>'+label+'<span class="list_close"></span></li>');
                        $(".list-non").stop().hide();  
                    }
                });
                
                // chked.each(function() {
                //     array.push($(this).next('label').text());
                //     //console.log(array.length)
                //     if(!arr.includes(array)) { //활동지역이 배열에 없을 때
                //         for(var i=0; i<array.length; i++) {
                //             $(".conn_area-list").append('<li>'+array[i]+'<span class="list_close"></span></li>');
                //             $(".list-non").stop().hide();  
                //         }
                //     }
                // });
            });
           
        });


    });

    // 배달 활동지역 삭제
    $(document).on('click', '.list_close', function() {
        $(this).parents('li').stop().remove();
        if($(".conn_area-list > li:not(.list-non)").length == 0) $(".list-non").stop().show();
    });


});

function fnChange(fnName,element) {
    $(document).on('change', 'input[name=delivery-type_list]', function() {
    console.log(element)
        var $this = $(this);
        var delivery = $this.next('label').find('span').text();    
        fnNext(fnName,delivery);     
    });    
}

function fnNext(a, b) {
    $(document).on('click', '#pop-next', function() {
        if($('.conn_delivery .btn-box > li').hasClass(a)) $(this).find('input').val(b);
        //$('.btn-delivery').hasClass(a).find('input').val(b);
        $('.btn-delivery2').css({"display":"block"});
    });   
}
</script>
</head>

<body>
<!-- header -->
<header>
    <h3></h3>
    <div class="inner">
        <h1 class="blind">우아한청년들 라이더지원시스템</h1>
        <h1 class="logo"><img src="/images/common/logo.png" alt="배민커넥트 로고"></h1>
    </div>
</header>
<!-- //header -->

<!-- contents -->
<div class="contents">   
    <section class="conn-info">
        <ul class="clearfix">
            <li>1</li>
            <li class="on">2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </section>
    <section class="conn-content">
        <h3 class="conn_title">2. 배달 수단 및 지역 선택</h3>

        <!-- conn_delivery -->
        <div class="connect conn_delivery">
            <p class="conn-guide">
                배달 활동에 이용할 수단을 선택해 주세요.
                <span class="middot">배달 수단은 등록 후에도 카카오톡 채널(@배민커넥트)를 통해 변경할 수 있어요.</span>
                <span class="middot">오토바이 지원자는  보험 심사를 위해 지원서 제출 후 마지막 화면의 링크를 클릭해 보험 심사 요청을 완료해 주시기 바랍니다.</span>
            </p>
            <ul class="btn-box">
                <li class="btn-delivery btn-delivery1"><input type="button" name="btn-delivery1" class="button-gray-line" value="선택하기" onclick="ajaxLink('./lp/ajax.delivery.html','GET','');return false;"></li>
                <li class="btn-delivery btn-delivery2"><input type="button" name="btn-delivery2" class="button-gray-line" value="2지망 선택하기" onclick="ajaxLink('./lp/ajax.delivery2.html','GET','');return false;"></li>
            </ul>
        </div>
        <!-- //conn_terms -->

        <!-- conn_form -->
        <div class="connect conn_area">
            <p class="conn-guide">
                배달 활동 지역을 선택해 주세요.
                <span class="middot">선택하신 지역 내 계시는 위치에서 2km 이내에서 배달 활동이 가능해요. (단, 도보 1km이내/ 오토바이 5km 이내)</span>
                <span class="middot">채널(@배민커넥트)를 통해 변경할 수 있어요.</span>
            </p> 
            <ul class="btn-box">
                <li class=""><input type="button" class="btn-area button-gray-line" value="선택하기" onclick="ajaxLink('./lp/ajax.area.html','GET','');return false;"></li>
            </ul>
            <ul class="conn_area-list clearfix">
                <li class="list-non">배달하실 구는 최대 3개까지 가능합니다.</li>
            </ul>
        </div>
        <!-- //conn_form -->
    </section>
    <section class="conn-btn">
        <ul class="btn-box">
            <li><input type="submit" class="button-primary-line btn-save-temp" value="임시저장"></li>
            <li><input type="submit" class="button-primary btn-next" value="다음"></li>
        </ul>
    </section>
    
</div>
<!-- //contents -->

<!-- footer -->
<footer>
    <div class="contact">
        <span>상담시간</span>
        <span>09:00~18:00 | 점심시간 12:00~13:00 | 주말, 공휴일 휴무</span>
    </div>
    <div class="company-info">
        <span>서울특별시 송파구 올림픽로35다길 42, 한국루터회관 16층</span>
        <span>대표이사 윤현준 | 사업자등록번호 417-87-00193</span>
        <span>(주)우아한청년들</span>
    </div>
</footer>
<!-- //footer -->

</body>

</html>
